!function(e){function n(r){if(t[r])return t[r].exports;var i=t[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}({0:function(e,n,t){"use strict";function r(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),a=t(456);t(475);var o=t(2),u=function(){},l=[{filename:"my-first-markuapad-book/book.txt",content:"chapter1.txt\nchapter2.txt"},{filename:"my-first-markuapad-book/manifest_files/chapter1.txt",in_sample:!1,content:"# Chapter 1\n\nHere is the first chapter"},{filename:"my-first-markuapad-book/manifest_files/chapter2.txt",in_sample:!1,content:"# Chapter 2\n\nHere is the second chapter"},{filename:"my-first-markuapad-book/manifest_code/sample.js",content:"function() {\n  console.log('Hello, World!');\n}\n"}],c=[{filename:"my-first-markuapad-book/manifest_files",files:[{filename:"chapter1.txt"},{filename:"chapter2.txt"}]},{filename:"my-first-markuapad-book/manifest_code",files:[{filename:"sample.js"}]},{filename:"my-first-markuapad-book/manifest_images",files:[]}];if(!(0,a.getCached)("my-first-markuapad-book/manifest_files")){var s=!0,f=!1,p=void 0;try{for(var h,v=l[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var y=h.value,d=y.filename;y.filename=y.filename.substr(y.filename.lastIndexOf("/")+1),(0,a.setCached)(d,y)}}catch(e){f=!0,p=e}finally{try{!s&&v.return&&v.return()}finally{if(f)throw p}}var g=!0,m=!1,k=void 0;try{for(var b,x=c[Symbol.iterator]();!(g=(b=x.next()).done);g=!0){var y=b.value;(0,a.setCached)(y.filename,y.files)}}catch(e){m=!0,k=e}finally{try{!g&&x.return&&x.return()}finally{if(m)throw k}}}var C=function(){function e(n){r(this,e),this.projectRoot=n,this.onAddCallbacks=[],this.onDeleteCallbacks=[],this.onManuscriptChangeCallbacks=[],this.onProgressStartedCallbacks=[],this.onProgressCallbacks=[],this.onMergeConflictCallback=null,this.manifestFilesKey=this.projectRoot+"/manifest_files",this.manifestCodeKey=this.projectRoot+"/manifest_code",this.manifestImagesKey=this.projectRoot+"/manifest_images",this.supportsImageUploads=!0}return i(e,[{key:"getFilePrefix",value:function(e){return"manuscript"===e?this.manifestFilesKey:"code"===e?this.manifestCodeKey:"image"===e?this.manifestImagesKey:this.projectRoot}},{key:"get",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?u:arguments[1],t=arguments.length<=2||void 0===arguments[2]?"manuscript":arguments[2],r=(0,a.getCached)(this.getFilePrefix(t)+"/"+e);n(null,r&&r.content)}},{key:"getSync",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"manuscript":arguments[1],t=(0,a.getCached)(this.getFilePrefix(n)+"/"+e);return t&&t.content}},{key:"listFiles",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0],n=o.map((0,a.getCached)(this.manifestFilesKey),function(e){return o.extend(e,{type:"manuscript"})});e(null,n)}},{key:"listImages",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0],n=o.map((0,a.getCached)(this.manifestImagesKey),function(e){return o.extend(e,{type:"image"})});e(null,n?o.map(n,function(e){return o.omit(e,"content")}):[])}},{key:"listCode",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0],n=o.map((0,a.getCached)(this.manifestCodeKey),function(e){return o.extend(e,{type:"code"})});e(null,n?o.map(n,function(e){return o.omit(e,"content")}):[])}},{key:"save",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"manuscript":arguments[1],t=arguments.length<=2||void 0===arguments[2]?"":arguments[2],r=arguments.length<=3||void 0===arguments[3]?u:arguments[3],i=this.getFilePrefix(n)+"/"+e,o=(0,a.getCached)(i);o.content=t,(0,a.setCached)(i,o),r(null)}},{key:"saveManuscript",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?u:arguments[1];(0,a.setCached)(this.manifestFilesKey,e),(0,a.setCached)(this.projectRoot+"/book.txt",{filename:"book.txt",content:o.map(e,function(e){return e.filename}).join("\n")});var t=!0,r=!1,i=void 0;try{for(var l,c=this.onManuscriptChangeCallbacks[Symbol.iterator]();!(t=(l=c.next()).done);t=!0){var s=l.value;s(null)}}catch(e){r=!0,i=e}finally{try{!t&&c.return&&c.return()}finally{if(r)throw i}}n(null)}},{key:"newImage",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?u:arguments[1];n("Images uploads don't work on markuapad.com")}},{key:"new",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"manuscript":arguments[1],t=arguments.length<=2||void 0===arguments[2]?"":arguments[2],r=arguments.length<=3||void 0===arguments[3]?u:arguments[3],i={filename:e,content:t,type:n},l=this.getFilePrefix(n)+"/"+e,c="manuscript"===n?this.manifestFilesKey:this.manifestCodeKey,s=(0,a.getCached)(c).concat([o.omit(i,"content")]);(0,a.setCached)(l,i),(0,a.setCached)(c,s),"manuscript"===n&&(0,a.setCached)(this.projectRoot+"/book.txt",{filename:"book.txt",content:o.map(s,function(e){return e.filename}).join("\n")}),r(null,i);var f=!0,p=!1,h=void 0;try{for(var v,y=this.onAddCallbacks[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var d=v.value;d(i)}}catch(e){p=!0,h=e}finally{try{!f&&y.return&&y.return()}finally{if(p)throw h}}}},{key:"delete",value:function(e){var n=arguments.length<=1||void 0===arguments[1]?"manuscript":arguments[1],t=arguments.length<=2||void 0===arguments[2]?u:arguments[2],r=void 0;r="manuscript"===n?this.manifestFilesKey:"image"===n?this.manifestImagesKey:this.manifestCodeKey;var i=(0,a.getCached)(r),l=this.getFilePrefix(n)+"/"+e;localStorage.removeItem(l),i=o.reject(i,function(n){return n.filename===e}),(0,a.setCached)(r,i),"manuscript"===n&&(0,a.setCached)(this.projectRoot+"/book.txt",{filename:"book.txt",content:o.map(i,function(e){return e.filename}).join("\n")}),t(null);var c=!0,s=!1,f=void 0;try{for(var p,h=this.onDeleteCallbacks[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var v=p.value;v(e)}}catch(e){s=!0,f=e}finally{try{!c&&h.return&&h.return()}finally{if(s)throw f}}}},{key:"setCursor",value:function(e,n){(0,a.setCached)("markuapad_cursor",{filename:e,position:n})}},{key:"onAdd",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0];this.onAddCallbacks.push(e)}},{key:"onDelete",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0];this.onDeleteCallbacks.push(e)}},{key:"onManuscriptChange",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0];this.onManuscriptChangeCallbacks.push(e)}},{key:"onProgress",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0];this.onProgressCallbacks.push(e)}},{key:"onProgressStarted",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0];this.onProgressStartedCallbacks.push(e)}},{key:"onMergeConflicts",value:function(){var e=arguments.length<=0||void 0===arguments[0]?u:arguments[0];this.onMergeConflictCallback=e}}]),e}();window.ExampleFileAccessor=C},2:function(e,n,t){var r,i;(function(){function t(e){function n(n,t,r,i,a,o){for(;a>=0&&a<o;a+=e){var u=i?i[a]:a;r=t(r,n[u],u,n)}return r}return function(t,r,i,a){r=w(r,a,4);var o=!I(t)&&C.keys(t),u=(o||t).length,l=e>0?0:u-1;return arguments.length<3&&(i=t[o?o[l]:l],l+=e),n(t,r,i,o,l,u)}}function a(e){return function(n,t,r){t=j(t,r);for(var i=F(n),a=e>0?0:i-1;a>=0&&a<i;a+=e)if(t(n[a],a,n))return a;return-1}}function o(e,n,t){return function(r,i,a){var o=0,u=F(r);if("number"==typeof a)e>0?o=a>=0?a:Math.max(a+u,o):u=a>=0?Math.min(a+1,u):a+u+1;else if(t&&a&&u)return a=t(r,i),r[a]===i?a:-1;if(i!==i)return a=n(v.call(r,o,u),C.isNaN),a>=0?a+o:-1;for(a=e>0?o:u-1;a>=0&&a<u;a+=e)if(r[a]===i)return a;return-1}}function u(e,n){var t=E.length,r=e.constructor,i=C.isFunction(r)&&r.prototype||f,a="constructor";for(C.has(e,a)&&!C.contains(n,a)&&n.push(a);t--;)a=E[t],a in e&&e[a]!==i[a]&&!C.contains(n,a)&&n.push(a)}var l=this,c=l._,s=Array.prototype,f=Object.prototype,p=Function.prototype,h=s.push,v=s.slice,y=f.toString,d=f.hasOwnProperty,g=Array.isArray,m=Object.keys,k=p.bind,b=Object.create,x=function(){},C=function(e){return e instanceof C?e:this instanceof C?void(this._wrapped=e):new C(e)};"undefined"!=typeof e&&e.exports&&(n=e.exports=C),n._=C,C.VERSION="1.8.3";var w=function(e,n,t){if(void 0===n)return e;switch(null==t?3:t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,a){return e.call(n,t,r,i,a)}}return function(){return e.apply(n,arguments)}},j=function(e,n,t){return null==e?C.identity:C.isFunction(e)?w(e,n,t):C.isObject(e)?C.matcher(e):C.property(e)};C.iteratee=function(e,n){return j(e,n,1/0)};var _=function(e,n){return function(t){var r=arguments.length;if(r<2||null==t)return t;for(var i=1;i<r;i++)for(var a=arguments[i],o=e(a),u=o.length,l=0;l<u;l++){var c=o[l];n&&void 0!==t[c]||(t[c]=a[c])}return t}},A=function(e){if(!C.isObject(e))return{};if(b)return b(e);x.prototype=e;var n=new x;return x.prototype=null,n},S=function(e){return function(n){return null==n?void 0:n[e]}},O=Math.pow(2,53)-1,F=S("length"),I=function(e){var n=F(e);return"number"==typeof n&&n>=0&&n<=O};C.each=C.forEach=function(e,n,t){n=w(n,t);var r,i;if(I(e))for(r=0,i=e.length;r<i;r++)n(e[r],r,e);else{var a=C.keys(e);for(r=0,i=a.length;r<i;r++)n(e[a[r]],a[r],e)}return e},C.map=C.collect=function(e,n,t){n=j(n,t);for(var r=!I(e)&&C.keys(e),i=(r||e).length,a=Array(i),o=0;o<i;o++){var u=r?r[o]:o;a[o]=n(e[u],u,e)}return a},C.reduce=C.foldl=C.inject=t(1),C.reduceRight=C.foldr=t(-1),C.find=C.detect=function(e,n,t){var r;if(r=I(e)?C.findIndex(e,n,t):C.findKey(e,n,t),void 0!==r&&r!==-1)return e[r]},C.filter=C.select=function(e,n,t){var r=[];return n=j(n,t),C.each(e,function(e,t,i){n(e,t,i)&&r.push(e)}),r},C.reject=function(e,n,t){return C.filter(e,C.negate(j(n)),t)},C.every=C.all=function(e,n,t){n=j(n,t);for(var r=!I(e)&&C.keys(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(!n(e[o],o,e))return!1}return!0},C.some=C.any=function(e,n,t){n=j(n,t);for(var r=!I(e)&&C.keys(e),i=(r||e).length,a=0;a<i;a++){var o=r?r[a]:a;if(n(e[o],o,e))return!0}return!1},C.contains=C.includes=C.include=function(e,n,t,r){return I(e)||(e=C.values(e)),("number"!=typeof t||r)&&(t=0),C.indexOf(e,n,t)>=0},C.invoke=function(e,n){var t=v.call(arguments,2),r=C.isFunction(n);return C.map(e,function(e){var i=r?n:e[n];return null==i?i:i.apply(e,t)})},C.pluck=function(e,n){return C.map(e,C.property(n))},C.where=function(e,n){return C.filter(e,C.matcher(n))},C.findWhere=function(e,n){return C.find(e,C.matcher(n))},C.max=function(e,n,t){var r,i,a=-(1/0),o=-(1/0);if(null==n&&null!=e){e=I(e)?e:C.values(e);for(var u=0,l=e.length;u<l;u++)r=e[u],r>a&&(a=r)}else n=j(n,t),C.each(e,function(e,t,r){i=n(e,t,r),(i>o||i===-(1/0)&&a===-(1/0))&&(a=e,o=i)});return a},C.min=function(e,n,t){var r,i,a=1/0,o=1/0;if(null==n&&null!=e){e=I(e)?e:C.values(e);for(var u=0,l=e.length;u<l;u++)r=e[u],r<a&&(a=r)}else n=j(n,t),C.each(e,function(e,t,r){i=n(e,t,r),(i<o||i===1/0&&a===1/0)&&(a=e,o=i)});return a},C.shuffle=function(e){for(var n,t=I(e)?e:C.values(e),r=t.length,i=Array(r),a=0;a<r;a++)n=C.random(0,a),n!==a&&(i[a]=i[n]),i[n]=t[a];return i},C.sample=function(e,n,t){return null==n||t?(I(e)||(e=C.values(e)),e[C.random(e.length-1)]):C.shuffle(e).slice(0,Math.max(0,n))},C.sortBy=function(e,n,t){return n=j(n,t),C.pluck(C.map(e,function(e,t,r){return{value:e,index:t,criteria:n(e,t,r)}}).sort(function(e,n){var t=e.criteria,r=n.criteria;if(t!==r){if(t>r||void 0===t)return 1;if(t<r||void 0===r)return-1}return e.index-n.index}),"value")};var D=function(e){return function(n,t,r){var i={};return t=j(t,r),C.each(n,function(r,a){var o=t(r,a,n);e(i,r,o)}),i}};C.groupBy=D(function(e,n,t){C.has(e,t)?e[t].push(n):e[t]=[n]}),C.indexBy=D(function(e,n,t){e[t]=n}),C.countBy=D(function(e,n,t){C.has(e,t)?e[t]++:e[t]=1}),C.toArray=function(e){return e?C.isArray(e)?v.call(e):I(e)?C.map(e,C.identity):C.values(e):[]},C.size=function(e){return null==e?0:I(e)?e.length:C.keys(e).length},C.partition=function(e,n,t){n=j(n,t);var r=[],i=[];return C.each(e,function(e,t,a){(n(e,t,a)?r:i).push(e)}),[r,i]},C.first=C.head=C.take=function(e,n,t){if(null!=e)return null==n||t?e[0]:C.initial(e,e.length-n)},C.initial=function(e,n,t){return v.call(e,0,Math.max(0,e.length-(null==n||t?1:n)))},C.last=function(e,n,t){if(null!=e)return null==n||t?e[e.length-1]:C.rest(e,Math.max(0,e.length-n))},C.rest=C.tail=C.drop=function(e,n,t){return v.call(e,null==n||t?1:n)},C.compact=function(e){return C.filter(e,C.identity)};var M=function(e,n,t,r){for(var i=[],a=0,o=r||0,u=F(e);o<u;o++){var l=e[o];if(I(l)&&(C.isArray(l)||C.isArguments(l))){n||(l=M(l,n,t));var c=0,s=l.length;for(i.length+=s;c<s;)i[a++]=l[c++]}else t||(i[a++]=l)}return i};C.flatten=function(e,n){return M(e,n,!1)},C.without=function(e){return C.difference(e,v.call(arguments,1))},C.uniq=C.unique=function(e,n,t,r){C.isBoolean(n)||(r=t,t=n,n=!1),null!=t&&(t=j(t,r));for(var i=[],a=[],o=0,u=F(e);o<u;o++){var l=e[o],c=t?t(l,o,e):l;n?(o&&a===c||i.push(l),a=c):t?C.contains(a,c)||(a.push(c),i.push(l)):C.contains(i,l)||i.push(l)}return i},C.union=function(){return C.uniq(M(arguments,!0,!0))},C.intersection=function(e){for(var n=[],t=arguments.length,r=0,i=F(e);r<i;r++){var a=e[r];if(!C.contains(n,a)){for(var o=1;o<t&&C.contains(arguments[o],a);o++);o===t&&n.push(a)}}return n},C.difference=function(e){var n=M(arguments,!0,!0,1);return C.filter(e,function(e){return!C.contains(n,e)})},C.zip=function(){return C.unzip(arguments)},C.unzip=function(e){for(var n=e&&C.max(e,F).length||0,t=Array(n),r=0;r<n;r++)t[r]=C.pluck(e,r);return t},C.object=function(e,n){for(var t={},r=0,i=F(e);r<i;r++)n?t[e[r]]=n[r]:t[e[r][0]]=e[r][1];return t},C.findIndex=a(1),C.findLastIndex=a(-1),C.sortedIndex=function(e,n,t,r){t=j(t,r,1);for(var i=t(n),a=0,o=F(e);a<o;){var u=Math.floor((a+o)/2);t(e[u])<i?a=u+1:o=u}return a},C.indexOf=o(1,C.findIndex,C.sortedIndex),C.lastIndexOf=o(-1,C.findLastIndex),C.range=function(e,n,t){null==n&&(n=e||0,e=0),t=t||1;for(var r=Math.max(Math.ceil((n-e)/t),0),i=Array(r),a=0;a<r;a++,e+=t)i[a]=e;return i};var P=function(e,n,t,r,i){if(!(r instanceof n))return e.apply(t,i);var a=A(e.prototype),o=e.apply(a,i);return C.isObject(o)?o:a};C.bind=function(e,n){if(k&&e.bind===k)return k.apply(e,v.call(arguments,1));if(!C.isFunction(e))throw new TypeError("Bind must be called on a function");var t=v.call(arguments,2),r=function(){return P(e,r,n,this,t.concat(v.call(arguments)))};return r},C.partial=function(e){var n=v.call(arguments,1),t=function(){for(var r=0,i=n.length,a=Array(i),o=0;o<i;o++)a[o]=n[o]===C?arguments[r++]:n[o];for(;r<arguments.length;)a.push(arguments[r++]);return P(e,t,this,this,a)};return t},C.bindAll=function(e){var n,t,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(n=1;n<r;n++)t=arguments[n],e[t]=C.bind(e[t],e);return e},C.memoize=function(e,n){var t=function(r){var i=t.cache,a=""+(n?n.apply(this,arguments):r);return C.has(i,a)||(i[a]=e.apply(this,arguments)),i[a]};return t.cache={},t},C.delay=function(e,n){var t=v.call(arguments,2);return setTimeout(function(){return e.apply(null,t)},n)},C.defer=C.partial(C.delay,C,1),C.throttle=function(e,n,t){var r,i,a,o=null,u=0;t||(t={});var l=function(){u=t.leading===!1?0:C.now(),o=null,a=e.apply(r,i),o||(r=i=null)};return function(){var c=C.now();u||t.leading!==!1||(u=c);var s=n-(c-u);return r=this,i=arguments,s<=0||s>n?(o&&(clearTimeout(o),o=null),u=c,a=e.apply(r,i),o||(r=i=null)):o||t.trailing===!1||(o=setTimeout(l,s)),a}},C.debounce=function(e,n,t){var r,i,a,o,u,l=function(){var c=C.now()-o;c<n&&c>=0?r=setTimeout(l,n-c):(r=null,t||(u=e.apply(a,i),r||(a=i=null)))};return function(){a=this,i=arguments,o=C.now();var c=t&&!r;return r||(r=setTimeout(l,n)),c&&(u=e.apply(a,i),a=i=null),u}},C.wrap=function(e,n){return C.partial(n,e)},C.negate=function(e){return function(){return!e.apply(this,arguments)}},C.compose=function(){var e=arguments,n=e.length-1;return function(){for(var t=n,r=e[n].apply(this,arguments);t--;)r=e[t].call(this,r);return r}},C.after=function(e,n){return function(){if(--e<1)return n.apply(this,arguments)}},C.before=function(e,n){var t;return function(){return--e>0&&(t=n.apply(this,arguments)),e<=1&&(n=null),t}},C.once=C.partial(C.before,2);var K=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];C.keys=function(e){if(!C.isObject(e))return[];if(m)return m(e);var n=[];for(var t in e)C.has(e,t)&&n.push(t);return K&&u(e,n),n},C.allKeys=function(e){if(!C.isObject(e))return[];var n=[];for(var t in e)n.push(t);return K&&u(e,n),n},C.values=function(e){for(var n=C.keys(e),t=n.length,r=Array(t),i=0;i<t;i++)r[i]=e[n[i]];return r},C.mapObject=function(e,n,t){n=j(n,t);for(var r,i=C.keys(e),a=i.length,o={},u=0;u<a;u++)r=i[u],o[r]=n(e[r],r,e);return o},C.pairs=function(e){for(var n=C.keys(e),t=n.length,r=Array(t),i=0;i<t;i++)r[i]=[n[i],e[n[i]]];return r},C.invert=function(e){for(var n={},t=C.keys(e),r=0,i=t.length;r<i;r++)n[e[t[r]]]=t[r];return n},C.functions=C.methods=function(e){var n=[];for(var t in e)C.isFunction(e[t])&&n.push(t);return n.sort()},C.extend=_(C.allKeys),C.extendOwn=C.assign=_(C.keys),C.findKey=function(e,n,t){n=j(n,t);for(var r,i=C.keys(e),a=0,o=i.length;a<o;a++)if(r=i[a],n(e[r],r,e))return r},C.pick=function(e,n,t){var r,i,a={},o=e;if(null==o)return a;C.isFunction(n)?(i=C.allKeys(o),r=w(n,t)):(i=M(arguments,!1,!1,1),r=function(e,n,t){return n in t},o=Object(o));for(var u=0,l=i.length;u<l;u++){var c=i[u],s=o[c];r(s,c,o)&&(a[c]=s)}return a},C.omit=function(e,n,t){if(C.isFunction(n))n=C.negate(n);else{var r=C.map(M(arguments,!1,!1,1),String);n=function(e,n){return!C.contains(r,n)}}return C.pick(e,n,t)},C.defaults=_(C.allKeys,!0),C.create=function(e,n){var t=A(e);return n&&C.extendOwn(t,n),t},C.clone=function(e){return C.isObject(e)?C.isArray(e)?e.slice():C.extend({},e):e},C.tap=function(e,n){return n(e),e},C.isMatch=function(e,n){var t=C.keys(n),r=t.length;if(null==e)return!r;for(var i=Object(e),a=0;a<r;a++){var o=t[a];if(n[o]!==i[o]||!(o in i))return!1}return!0};var R=function(e,n,t,r){if(e===n)return 0!==e||1/e===1/n;if(null==e||null==n)return e===n;e instanceof C&&(e=e._wrapped),n instanceof C&&(n=n._wrapped);var i=y.call(e);if(i!==y.call(n))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!==+e?+n!==+n:0===+e?1/+e===1/n:+e===+n;case"[object Date]":case"[object Boolean]":return+e===+n}var a="[object Array]"===i;if(!a){if("object"!=typeof e||"object"!=typeof n)return!1;var o=e.constructor,u=n.constructor;if(o!==u&&!(C.isFunction(o)&&o instanceof o&&C.isFunction(u)&&u instanceof u)&&"constructor"in e&&"constructor"in n)return!1}t=t||[],r=r||[];for(var l=t.length;l--;)if(t[l]===e)return r[l]===n;if(t.push(e),r.push(n),a){if(l=e.length,l!==n.length)return!1;for(;l--;)if(!R(e[l],n[l],t,r))return!1}else{var c,s=C.keys(e);if(l=s.length,C.keys(n).length!==l)return!1;for(;l--;)if(c=s[l],!C.has(n,c)||!R(e[c],n[c],t,r))return!1}return t.pop(),r.pop(),!0};C.isEqual=function(e,n){return R(e,n)},C.isEmpty=function(e){return null==e||(I(e)&&(C.isArray(e)||C.isString(e)||C.isArguments(e))?0===e.length:0===C.keys(e).length)},C.isElement=function(e){return!(!e||1!==e.nodeType)},C.isArray=g||function(e){return"[object Array]"===y.call(e)},C.isObject=function(e){var n=typeof e;return"function"===n||"object"===n&&!!e},C.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){C["is"+e]=function(n){return y.call(n)==="[object "+e+"]"}}),C.isArguments(arguments)||(C.isArguments=function(e){return C.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(C.isFunction=function(e){return"function"==typeof e||!1}),C.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},C.isNaN=function(e){return C.isNumber(e)&&e!==+e},C.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"===y.call(e)},C.isNull=function(e){return null===e},C.isUndefined=function(e){return void 0===e},C.has=function(e,n){return null!=e&&d.call(e,n)},C.noConflict=function(){return l._=c,this},C.identity=function(e){return e},C.constant=function(e){return function(){return e}},C.noop=function(){},C.property=S,C.propertyOf=function(e){return null==e?function(){}:function(n){return e[n]}},C.matcher=C.matches=function(e){return e=C.extendOwn({},e),function(n){return C.isMatch(n,e)}},C.times=function(e,n,t){var r=Array(Math.max(0,e));n=w(n,t,1);for(var i=0;i<e;i++)r[i]=n(i);return r},C.random=function(e,n){return null==n&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))},C.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=C.invert(N),B=function(e){var n=function(n){return e[n]},t="(?:"+C.keys(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,n):e}};C.escape=B(N),C.unescape=B(T),C.result=function(e,n,t){var r=null==e?void 0:e[n];return void 0===r&&(r=t),C.isFunction(r)?r.call(e):r};var q=0;C.uniqueId=function(e){var n=++q+"";return e?e+n:n},C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,J=function(e){return"\\"+U[e]};C.template=function(e,n,t){!n&&t&&(n=t),n=C.defaults({},n,C.templateSettings);var r=RegExp([(n.escape||z).source,(n.interpolate||z).source,(n.evaluate||z).source].join("|")+"|$","g"),i=0,a="__p+='";e.replace(r,function(n,t,r,o,u){return a+=e.slice(i,u).replace(H,J),i=u+n.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),n}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{var o=new Function(n.variable||"obj","_",a)}catch(e){throw e.source=a,e}var u=function(e){return o.call(this,e,C)},l=n.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u},C.chain=function(e){var n=C(e);return n._chain=!0,n};var L=function(e,n){return e._chain?C(n).chain():n};C.mixin=function(e){C.each(C.functions(e),function(n){var t=C[n]=e[n];C.prototype[n]=function(){var e=[this._wrapped];return h.apply(e,arguments),L(this,t.apply(C,e))}})},C.mixin(C),C.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=s[e];C.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],L(this,t)}}),C.each(["concat","join","slice"],function(e){var n=s[e];C.prototype[e]=function(){return L(this,n.apply(this._wrapped,arguments))}}),C.prototype.value=function(){return this._wrapped},C.prototype.valueOf=C.prototype.toJSON=C.prototype.value,C.prototype.toString=function(){return""+this._wrapped},r=[],i=function(){return C}.apply(n,r),!(void 0!==i&&(e.exports=i))}).call(this)},241:function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),i=function(){function e(){t(this,e),this.fileAccessorDelegate=null}return r(e,[{key:"get",value:function(){var e;(e=this.fileAccessorDelegate).get.apply(e,arguments)}},{key:"getSync",value:function(){var e;return(e=this.fileAccessorDelegate).getSync.apply(e,arguments)}},{key:"listFiles",value:function(){var e;(e=this.fileAccessorDelegate).listFiles.apply(e,arguments)}},{key:"listImages",value:function(){var e;(e=this.fileAccessorDelegate).listImages.apply(e,arguments)}},{key:"listCode",value:function(){var e;(e=this.fileAccessorDelegate).listCode.apply(e,arguments)}},{key:"save",value:function(){var e;(e=this.fileAccessorDelegate).save.apply(e,arguments)}},{key:"saveManuscript",value:function(){var e;(e=this.fileAccessorDelegate).saveManuscript.apply(e,arguments)}},{key:"newImage",value:function(){var e;(e=this.fileAccessorDelegate).newImage.apply(e,arguments)}},{key:"new",value:function(){var e;(e=this.fileAccessorDelegate).new.apply(e,arguments)}},{key:"delete",value:function(){var e;(e=this.fileAccessorDelegate).delete.apply(e,arguments)}},{key:"isSetup",value:function(){null!==this.fileAccessorDelegate}},{key:"setup",value:function(e,n){this.fileAccessorDelegate=new e(n)}},{key:"setCursor",value:function(){var e;(e=this.fileAccessorDelegate).setCursor.apply(e,arguments)}},{key:"onDelete",value:function(){var e;(e=this.fileAccessorDelegate).onDelete.apply(e,arguments)}},{key:"onManuscriptChange",value:function(){var e;(e=this.fileAccessorDelegate).onManuscriptChange.apply(e,arguments)}},{key:"onAdd",value:function(){var e;(e=this.fileAccessorDelegate).onAdd.apply(e,arguments)}},{key:"onProgress",value:function(){var e;(e=this.fileAccessorDelegate).onProgress.apply(e,arguments)}},{key:"onProgressStarted",value:function(){var e;(e=this.fileAccessorDelegate).onProgressStarted.apply(e,arguments)}},{key:"supportsImageUploads",value:function(){return this.fileAccessorDelegate.supportsImageUploads}},{key:"onMergeConflicts",value:function(){var e;return(e=this.fileAccessorDelegate).onMergeConflicts.apply(e,arguments)}}]),e}();n.default=new i,e.exports=n.default},456:function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(241),a=r(i),o=/src="images\/([\w,\s-]+\.(?:(?:png)|(?:jpg)|(?:jpeg)|(?:gif)|(?:bmp)))/,u=new RegExp(o.source,"g"),l=function(e,n){var t=e.match(u),r=!0,i=!1,l=void 0;try{for(var c,s=(t||[])[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var f=c.value,p=f.substr(f.lastIndexOf("/")+1),h=a.default.getSync(p,"image",n),v=void 0;h?(h.data?v="data:"+h.mimetype.string+";base64,"+h.data:h.url&&(v=h.url),e=e.replace(o,'src="'+v)):a.default.get(p,n,"image")}}catch(e){i=!0,l=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw l}}return e};n.fixImagePaths=l;var c=function(e,n){var t=void 0;if(!(t=localStorage.getItem(e)))return n;try{return t=JSON.parse(t)}catch(e){return t}};n.getCached=c;var s=function(e,n){return localStorage.setItem(e,"string"==typeof n?n:JSON.stringify(n)),n};n.setCached=s},475:function(e,n){}});